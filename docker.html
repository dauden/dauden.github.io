<h1 class="code-line" data-line-start=0 data-line-end=1 ><a id="Docker_best_practice_0"></a>Docker best practice</h1>
<ul>
<li class="has-line-data" data-line-start="1" data-line-end="5">Choose right Base image
<ul>
<li class="has-line-data" data-line-start="2" data-line-end="3"><a href="##Use-official">Use official as Base image</a></li>
<li class="has-line-data" data-line-start="3" data-line-end="4"><a href="##Using-specific">Using specific version of image</a></li>
<li class="has-line-data" data-line-start="4" data-line-end="5"><a href="##Select-small-sized">Select small-sized of image</a></li>
</ul>
</li>
<li class="has-line-data" data-line-start="5" data-line-end="8">Make docker build faster
<ul>
<li class="has-line-data" data-line-start="6" data-line-end="7"><a href="##Exclude-un-using-resource">Exclude un-using resource</a></li>
<li class="has-line-data" data-line-start="7" data-line-end="8"><a href="##Optimize-cached">Optimize cached image layers</a></li>
</ul>
</li>
<li class="has-line-data" data-line-start="8" data-line-end="12">Security and/with less contents
<ul>
<li class="has-line-data" data-line-start="9" data-line-end="10"><a href="##Multiple-stage-builds">Use of Multiple-stage builds</a></li>
<li class="has-line-data" data-line-start="10" data-line-end="11"><a href="##Privileged-User">Least Privileged User</a></li>
<li class="has-line-data" data-line-start="11" data-line-end="12"><a href="##Security-Vulnerabilities">Scan Images for Security Vulnerabilities</a></li>
</ul>
</li>
</ul>
<h2 class="code-line" data-line-start=12 data-line-end=13 ><a id="Use_official_12"></a>Use official</h2>
<h2 class="code-line" data-line-start=13 data-line-end=14 ><a id="Using_specific_13"></a>Using specific</h2>
<h2 class="code-line" data-line-start=14 data-line-end=15 ><a id="Select_smallsized_14"></a>Select small-sized</h2>
<h2 class="code-line" data-line-start=16 data-line-end=17 ><a id="Exclude_unusing_resource_16"></a>Exclude un-using resource</h2>
<p class="has-line-data" data-line-start="17" data-line-end="18">.dockerignore</p>
<h3 class="code-line" data-line-start=18 data-line-end=19 ><a id="Multiple_dockerignore_18"></a>Multiple .dockerignore</h3>
<p class="has-line-data" data-line-start="19" data-line-end="20">We can now use multiple <em>.dockerignore</em> files in Docker.</p>
<h4 class="code-line" data-line-start=20 data-line-end=21 ><a id="First_step_20"></a>First step</h4>
<p class="has-line-data" data-line-start="21" data-line-end="22">We need to enable BuildKit mode; this is done either by setting:</p>
<pre><code class="has-line-data" data-line-start="24" data-line-end="26" class="language-sh">    $ <span class="hljs-built_in">export</span> DOCKER_BUILDKIT=<span class="hljs-number">1</span>
</code></pre>
<p class="has-line-data" data-line-start="26" data-line-end="27">or configure the Docker daemon by typing a json Docker <a href="https://docs.docker.com/engine/reference/commandline/dockerd/">daemon configuration</a> file. by adding this configuration or set buildkit is true:</p>
<pre><code class="has-line-data" data-line-start="28" data-line-end="30" class="language-json">{ "<span class="hljs-attribute">features</span>": <span class="hljs-value">{ "<span class="hljs-attribute">buildkit</span>": <span class="hljs-value"><span class="hljs-literal">true</span> </span>} </span>}
</code></pre>
<p class="has-line-data" data-line-start="30" data-line-end="31">to the Docker daemon configuration in <em>~/.docker/daemon.json</em> and restarting the daemon. This will be enabled by default in future.</p>
<h4 class="code-line" data-line-start=32 data-line-end=33 ><a id="Next_step_32"></a>Next step:</h4>
<p class="has-line-data" data-line-start="33" data-line-end="34">We also need to prefix the name of our <em>.dockerignore</em> file with the Dockerfile name. so we Dockerfile is called <em>prod.Dockerfile</em> the ignore file needs to be called <em>prod.dockerignore</em>.</p>
<h2 class="code-line" data-line-start=35 data-line-end=36 ><a id="Optimize_cached_35"></a>Optimize cached</h2>
<h2 class="code-line" data-line-start=36 data-line-end=37 ><a id="Multiple_stage_builds_36"></a>Multiple stage builds</h2>
<h2 class="code-line" data-line-start=37 data-line-end=38 ><a id="PrivilegedUser_37"></a>Privileged-User</h2>
<h2 class="code-line" data-line-start=38 data-line-end=39 ><a id="Security_Vulnerabilities_38"></a>Security Vulnerabilities</h2>
